# –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –º–∞—à–∏–Ω

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∑–∞—è–≤–æ–∫ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏
- –ù–∞–∑–Ω–∞—á–∞–µ—Ç –º–∞—à–∏–Ω—ã —Ç–æ–ª—å–∫–æ —Ç–µ–º –∑–∞—è–≤–∫–∞–º, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—â–µ –ù–ï–¢ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–π –º–∞—à–∏–Ω—ã
- –†–∞–±–æ—Ç–∞–µ—Ç "—Ç–∏—Ö–æ" –±–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 2. –†—É—á–Ω–æ–µ –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ (–∫–Ω–æ–ø–∫–∞ "–ê–≤—Ç–æ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ")
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è—Ö
- **–ù–ï –ü–ï–†–ï–ó–ê–ü–ò–°–´–í–ê–ï–¢** —É–∂–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –º–∞—à–∏–Ω—ã

## üéØ –õ–æ–≥–∏–∫–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —Ä–∞–π–æ–Ω–∞–º

| –†–∞–π–æ–Ω | –ù–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –º–∞—à–∏–Ω–∞ |
|-------|-------------------|
| –¶–µ–Ω—Ç—Ä, –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π | –ú–∞—à–∏–Ω–∞ 1 |
| –í–æ–∫–∑–∞–ª, –í–æ–∫–∑–∞–ª—å–Ω—ã–π, –ñ/–î, –ñ–î, –ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–π | –ú–∞—à–∏–Ω–∞ 2 |
| –¶–µ–Ω—Ç—Ä –ü–ó, –¶–µ–Ω—Ç—Ä –ü/–ó, –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –ü–ó | –ú–∞—à–∏–Ω–∞ 3 |
| –í–æ–∫–∑–∞–ª –ü–ó, –í–æ–∫–∑–∞–ª –ü/–ó, –í–æ–∫–∑–∞–ª—å–Ω—ã–π –ü–ó | –ú–∞—à–∏–Ω–∞ 4 |
| **–õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ —Ä–∞–π–æ–Ω—ã** | **–ú–∞—à–∏–Ω–∞ 5** (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è) |

## üîí –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏

### –ó–∞—è–≤–∫–∞ –ù–ï –ë–£–î–ï–¢ –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∞, –µ—Å–ª–∏:
- –£ –Ω–µ—ë —É–∂–µ –µ—Å—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –º–∞—à–∏–Ω–∞ (–ª—é–±–∞—è)
- –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—à–∏–Ω—ã –Ω–µ –ø—É—Å—Ç–æ–µ

### –ó–∞—è–≤–∫–∞ –ë–£–î–ï–¢ –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∞, –µ—Å–ª–∏:
- –£ –Ω–µ—ë –Ω–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π –º–∞—à–∏–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ï—Å—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ, –Ω–æ –ø–æ–ª–µ `truck_name` –ø—É—Å—Ç–æ–µ

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### API Endpoints:
- `GET /api/leads` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ + –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö
- `PUT /api/leads/assign` - –º–∞—Å—Å–æ–≤–æ–µ –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –Ω–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö)
- `POST /api/leads/assign` - –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–∞—à–∏–Ω—ã (–º–æ–∂–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å)

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ñ—É–Ω–∫—Ü–∏–∏:
- `silentAutoAssignToTrucks()` - —Ç–∏—Ö–æ–µ –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- `autoAssignToTrucks()` - —Ä—É—á–Ω–æ–µ –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å –æ—Ç—á–µ—Ç–æ–º
- `handleAssignLead()` - —Ä—É—á–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–∞—à–∏–Ω—ã

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

1. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –£–∂–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –º–∞—à–∏–Ω—ã –Ω–µ "–ø—Ä—ã–≥–∞—é—Ç" –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
2. **–ì–∏–±–∫–æ—Å—Ç—å**: –ú–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –Ω–∞–∑–Ω–∞—á–∏—Ç—å –ª—é–±—É—é –º–∞—à–∏–Ω—É, –æ–Ω–∞ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –ù–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –º–∞—à–∏–Ω—ã –ø–æ —Ä–∞–π–æ–Ω—É
4. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: –ü–æ–Ω—è—Ç–Ω–æ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –º–∞—à–∏–Ω–∞

## üö´ –ß—Ç–æ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

- ~~AmoCRM webhook'–∏~~ - —É–±—Ä–∞–Ω—ã, —Ç–∞–∫ –∫–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å AmoCRM
- ~~–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–Ω–∏–µ~~ - —Å–∏—Å—Ç–µ–º–∞ —É–≤–∞–∂–∞–µ—Ç —É–∂–µ —Å–¥–µ–ª–∞–Ω–Ω—ã–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è 