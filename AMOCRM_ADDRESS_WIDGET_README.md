# üöÄ –í–∏–¥–∂–µ—Ç –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è AMOCRM

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–í–∏–¥–∂–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –ø–æ–ª–µ–π –≤ AMOCRM, –∏—Å–ø–æ–ª—å–∑—É—è –¥–∞–Ω–Ω—ã–µ –∏–∑ PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –í–∏–¥–∂–µ—Ç –∏—â–µ—Ç –∞–¥—Ä–µ—Å–∞ –≤ –ø–æ–ª–µ `info.delivery_address` —Ç–∞–±–ª–∏—Ü—ã `leads`.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- ‚úÖ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–æ–≤–ø–∞–¥–∞—é—â–µ–≥–æ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ Debounce –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è AMOCRM

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
hrustal-admin/
‚îú‚îÄ‚îÄ src/app/api/addresses/search/route.ts    # API endpoint –¥–ª—è –ø–æ–∏—Å–∫–∞
‚îú‚îÄ‚îÄ public/widgets/
‚îÇ   ‚îú‚îÄ‚îÄ address-autocomplete.js              # –í–∏–¥–∂–µ—Ç –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∞–¥—Ä–µ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ amocrm-search-enhancer.js           # –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ AMOCRM
‚îÇ   ‚îú‚îÄ‚îÄ amocrm-integration.html              # –î–µ–º–æ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ amocrm-search-demo.html             # –î–µ–º–æ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
‚îî‚îÄ‚îÄ AMOCRM_ADDRESS_WIDGET_README.md          # –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ API

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à Next.js —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `https://your-domain.com`.

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–î–æ–±–∞–≤—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞:

```sql
-- –°–æ–∑–¥–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ JSON –ø–æ–ª—é
CREATE INDEX idx_leads_info_delivery_address 
ON leads USING gin ((info->>'delivery_address'));

-- –ò–ª–∏ –¥–ª—è PostgreSQL 12+ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
CREATE INDEX idx_leads_info_delivery_address 
ON leads USING gin (info jsonb_path_ops);
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS

API endpoint —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å CORS –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å AMOCRM.

## üé® –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AMOCRM

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤

#### –®–∞–≥ 1: –î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤ AMOCRM

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö AMOCRM –¥–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤–∏–¥–∂–µ—Ç–∞:

```html
<script src="https://your-domain.com/widgets/address-autocomplete.js"></script>
```

#### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª–µ –∞–¥—Ä–µ—Å–∞

–î–æ–±–∞–≤—å—Ç–µ –∞—Ç—Ä–∏–±—É—Ç `data-address-autocomplete` –∫ –ø–æ–ª—é –∞–¥—Ä–µ—Å–∞:

```html
<input type="text" name="delivery_address" data-address-autocomplete>
```

#### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ API URL

–í —Ñ–∞–π–ª–µ `address-autocomplete.js` –∏–∑–º–µ–Ω–∏—Ç–µ URL API:

```javascript
const CONFIG = {
  API_URL: 'https://your-domain.com/api/addresses/search',
  DEBOUNCE_DELAY: 300,
  MIN_QUERY_LENGTH: 2,
  MAX_SUGGESTIONS: 10
};
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ AMOCRM

#### –®–∞–≥ 1: –î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤ AMOCRM

```html
<script src="https://your-domain.com/widgets/amocrm-search-enhancer.js"></script>
```

#### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ API URL

–í —Ñ–∞–π–ª–µ `amocrm-search-enhancer.js` –∏–∑–º–µ–Ω–∏—Ç–µ URL API:

```javascript
const CONFIG = {
  API_URL: 'https://your-domain.com/api/addresses/search',
  // ...
};
```

#### –®–∞–≥ 3: –ì–æ—Ç–æ–≤–æ!

–í–∏–¥–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç –∏ —É–ª—É—á—à–∏—Ç –≤—Å–µ –ø–æ–ª—è –ø–æ–∏—Å–∫–∞ –≤ AMOCRM.

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∏–¥–∂–µ—Ç–∞

```javascript
const CONFIG = {
  API_URL: 'https://your-domain.com/api/addresses/search',  // URL API
  DEBOUNCE_DELAY: 300,        // –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ–∏—Å–∫–∞ (–º—Å)
  MIN_QUERY_LENGTH: 2,        // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∑–∞–ø—Ä–æ—Å–∞
  MAX_SUGGESTIONS: 10         // –ú–∞–∫—Å–∏–º—É–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
};
```

### API Endpoint

```
GET /api/addresses/search?q=–ø–æ–∏—Å–∫–æ–≤—ã–π_–∑–∞–ø—Ä–æ—Å&limit=10
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `q` - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
- `limit` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)

**–û—Ç–≤–µ—Ç:**
```json
{
  "addresses": ["–∞–¥—Ä–µ—Å1", "–∞–¥—Ä–µ—Å2", "–∞–¥—Ä–µ—Å3"],
  "query": "–ø–æ–∏—Å–∫–æ–≤—ã–π_–∑–∞–ø—Ä–æ—Å",
  "total": 3
}
```

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

–í–∏–¥–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `data-address-autocomplete`:

```html
<input type="text" data-address-autocomplete>
```

#### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```javascript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
const autocomplete = AddressAutocomplete.init(targetElement, {
  onSelect: (address) => {
    console.log('–í—ã–±—Ä–∞–Ω –∞–¥—Ä–µ—Å:', address);
    // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞
  },
  onChange: (value) => {
    console.log('–ò–∑–º–µ–Ω–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ:', value);
  }
});

// –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞
autocomplete.destroy();
```

#### –°–æ–±—ã—Ç–∏—è

–í–∏–¥–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:

```javascript
// –°–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏–µ –≤—ã–±–æ—Ä–∞ –∞–¥—Ä–µ—Å–∞
document.addEventListener('addressSelected', (event) => {
  console.log('–í—ã–±—Ä–∞–Ω –∞–¥—Ä–µ—Å:', event.detail.address);
  console.log('–ü–æ–ª–µ:', event.detail.field);
});
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ AMOCRM

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞

–í–∏–¥–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç –∏ —É–ª—É—á—à–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è –ø–æ–∏—Å–∫–∞ –≤ AMOCRM:

```javascript
// –í–∏–¥–∂–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ AMOCRM...');
```

#### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```javascript
// –†—É—á–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
if (window.AmocrmSearchEnhancer) {
  window.AmocrmSearchEnhancer.init();
}

// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞
window.AmocrmSearchEnhancer.enhanceAmocrmSearch();
```

## üîç –ü–æ–∏—Å–∫ –∞–¥—Ä–µ—Å–æ–≤

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞

1. **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞**: –ü–æ–∏—Å–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ 2+ —Å–∏–º–≤–æ–ª–æ–≤
2. **–ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ILIKE –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –ø–æ–¥—Å—Ç—Ä–æ–∫–µ
3. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å**: –î—É–±–ª–∏–∫–∞—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è
4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: –ú–∞–∫—Å–∏–º—É–º 10 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### SQL –∑–∞–ø—Ä–æ—Å

```sql
SELECT DISTINCT info->>'delivery_address' as address
FROM leads 
WHERE info->>'delivery_address' ILIKE '%query%'
LIMIT 10;
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ API

```typescript
// –í API route –¥–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
console.log(`–ü–æ–∏—Å–∫ –∞–¥—Ä–µ—Å–æ–≤: "${query}" - –Ω–∞–π–¥–µ–Ω–æ ${addresses.length} —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤`);
```

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤ –≤–∏–¥–∂–µ—Ç–µ

```javascript
// –í –≤–∏–¥–∂–µ—Ç–µ –¥–æ–±–∞–≤—å—Ç–µ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
if (options.onSelect) {
  console.log(`–í—ã–±—Ä–∞–Ω –∞–¥—Ä–µ—Å: ${selectedAddress}`);
  // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Google Analytics –∏–ª–∏ –¥—Ä—É–≥—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É
}
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –í–∏–¥–∂–µ—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL —Å–∫—Ä–∏–ø—Ç–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ CORS
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ç–∞–±–ª–∏—Ü–µ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SQL –∑–∞–ø—Ä–æ—Å –≤ API

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
2. –£–≤–µ–ª–∏—á—å—Ç–µ `DEBOUNCE_DELAY`
3. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ `MAX_SUGGESTIONS`

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```sql
-- –°–æ–∑–¥–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞
CREATE INDEX idx_leads_info_delivery_address 
ON leads USING gin ((info->>'delivery_address'));
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:

```typescript
// –í API route –¥–æ–±–∞–≤—å—Ç–µ Redis –∫—ç—à
import Redis from 'ioredis';
const redis = new Redis(process.env.REDIS_URL);

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º –∫ –ë–î
const cached = await redis.get(`address:${query}`);
if (cached) {
  return NextResponse.json(JSON.parse(cached));
}
```

### CDN

–†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –≤–∏–¥–∂–µ—Ç –Ω–∞ CDN –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏:

```html
<script src="https://cdn.your-domain.com/widgets/address-autocomplete.js"></script>
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ CORS —Ç–æ–ª—å–∫–æ –¥–æ–º–µ–Ω–∞–º–∏ AMOCRM:

```typescript
response.headers.set('Access-Control-Allow-Origin', 'https://your-domain.amocrm.ru');
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–î–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á –¥–ª—è –∑–∞—â–∏—Ç—ã endpoint:

```typescript
// –í API route –¥–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É API –∫–ª—é—á–∞
const apiKey = request.headers.get('X-API-Key');
if (apiKey !== process.env.AMOCRM_API_KEY) {
  return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –î–µ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞

–û—Ç–∫—Ä–æ–π—Ç–µ `https://your-domain.com/widgets/amocrm-integration.html` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞.

### API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç API endpoint
curl "https://your-domain.com/api/addresses/search?q=–º–æ—Å–∫–≤–∞&limit=5"
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```html
<!DOCTYPE html>
<html>
<head>
    <script src="https://your-domain.com/widgets/address-autocomplete.js"></script>
</head>
<body>
    <input type="text" data-address-autocomplete placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å...">
</body>
</html>
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```html
<!DOCTYPE html>
<html>
<head>
    <script src="https://your-domain.com/widgets/address-autocomplete.js"></script>
</head>
<body>
    <input type="text" id="address-field" placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å...">
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const field = document.getElementById('address-field');
            
            AddressAutocomplete.init(field, {
                onSelect: (address) => {
                    console.log('–í—ã–±—Ä–∞–Ω –∞–¥—Ä–µ—Å:', address);
                    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
                },
                onChange: (value) => {
                    console.log('–ò–∑–º–µ–Ω–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ:', value);
                }
            });
        });
    </script>
</body>
</html>
```

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –≤–∏–¥–∂–µ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. 